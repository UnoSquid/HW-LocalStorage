<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Vigilantes Wanted</title>
	<meta name="description" content="Local Storage Assignment">
	<meta name="author" content="John H. Pollman">

	<meta name="viewport" content="width=device-width,initial-scale=1">

	<link rel="stylesheet" href="normalize.css" media="screen" />
	<link rel="stylesheet" href="style.css" />

	<script src="modernizr-2.5.3.js"></script>
</head>
<body>

<div class="wrapper">
	<header>
		<h1>Vigilante Application</h1>
		<h2>2012-19 rev. #1b75a</h2>
	</header>

	<section>
		<form>
			<fieldset>
				<legend>Personal Information</legend>
				
				<!--regular expressions are REALLY cryptic-->

				<label for="name">Name: </label>
				<input type="text" name="name" id="name" required="required" pattern="" placeholder="Name"/>
				<br>

				<label for="age">Age: </label>
				<input type="number" name="age" id="age" required="required" pattern="[0-9]" placeholder="18"/>
				<br>

				<label for="email">Email: </label>
				<input type="email" name="email" id="email" required="required" pattern="^([a-zA-Z0-9_\-\.]+)@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})" placeholder="name@server.domain"/>
				<br>

				<label for="dayjob">Day Job: </label>
				<input type="text" name="dayjob" id="dayjob" required="required" placeholder="job"/>
				<br>

				<label for="startdate">Start Date: </label>
				<input type="date" name="startdate" id="startdate" required="required" pattern="[0-9]{4}[-][0-9]{1,2}[-][0-9]{1,2}"placeholder="yyyy-mm-dd"/>
				<br>

				<label for="blogurl">Blog URL: </label>
				<input type="url" name="blogurl" id="blogurl" placeholder="http://"/>
			</fieldset>

			<fieldset>
				<legend>Vigilante Details</legend>

				<label for="vigilantename">Name: </label>
				<input type="text" name="vigilantename" id="vigilantename" required="required" placeholder="Vigilante Name"/>
				<br>

				<label for="symbol">Symbol: </label>
				<input type="text" name="symbol" id="symbol" required="required" placeholder="Symbol"/>
				<br>

				<label for="primarycolor">Primary Color: </label>
				<input type="color" name="primarycolor" id="primarycolor" placeholder="#fa60ff"/>
				<br>

				<label for="motivations">Motivations: </label>
				<select name="motivations" id="motivations" multiple size="4" required="required">
					<option value="parentskilled">Parents killed in front of me</option>
					<option value="contractualobligation">Condition for gaining super powers</option>
					<option value="girlfriendkidnapped">Girlfriend kidnapped</option>
					<option value="badenoughdude">President kidnapped... by ninjas</option>
					<option value="setonfire">Set on fire</option>
					<option value="blenderstolen">Blender stolen</option>
					<option value="robot">I am a robot, and I was programmed to do so</option>
					<option value="apathy">Meh, why not?</option>
					<!-- create at least 7 more vigilante motivations. must stay a multi-select. -->
				</select>
				<br>

				<label for="weapon">Weapon of Choice: </label>
				<select name="weapon" id="weapon" required="required">
					<option value=""></option>
					<option value="fists">Bare Fists</option>
					<option value="swords">Swords</option>
					<option value="eyelasers">Eye Lasers</option>
					<option value="sonicboom">Sonic Boom</option>
					<option value="tentacles">Tentacles</option>
					<option value="armcannon">Arm Cannon</option>
					<option value="cheesegrater">Cheese Grater</option>
					<option value="love">The Power of Loveâ„¢</option>
					<!-- create at least 7 more weapon options. must stay a single select. -->
				</select>
				<br>

				<label for="reason">Why Should We Choose You? </label>
				<textarea name="reason" id="reason" required="required" placeholder="Reason"></textarea>
			</fieldset>

			<fieldset>
				<legend>Verification</legend>

				<p>To ensure only qualified people apply, enter your pre-assigned unique vigilante invite code below.</p>

				<label for="code">Vigilante Code: </label>
				<input type="text" name="code" id="code" required="required" maxlength="10" pattern="[0-9a-zA-Z]{7,10}"/>
			</fieldset>

			<button type="submit" id="submit">Submit Application</button>
			<button type="reset" id="reset">Restart Application</button>
		</form>
	</section>
	<footer>
		&copy;2012 Vigilante Services Inc.
	</footer>
</div> <!-- /.wrapper -->

<!-- KEEP THIS BELOW ALL MARKUP! -->
<!--[if lt IE 7 ]>
	<script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.2/CFInstall.min.js"></script>
	<script>window.attachEvent("onload",function(){CFInstall.check({mode:"overlay"})})</script>
<![endif]-->

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

<script type="text/javascript">
	// wait until the page is fully loaded to start firing our javascript
	
	function found(position) {
		alert('Lrrr asks if this is on');
		console.log(position);
	}
	
	function notFound(position) {
		console.log(position);
	}
	
	$(document).ready(function() {
		// call function that will populate form with info from local storage
		populate_form_with_stored_info();

		// store the name every time a user types in the name field
		$('#name').keyup(function() {
			// only store the name if it's not blank
			if ($('#name').val() != '') {
				localStorage.setItem('name', $('#name').val());
			}
		});
		
		$('#age').change(function() {
			if ($('#age').val() != '') {
				localStorage.setItem('age', $('#age').val());
			}
		});
		
		$('#email').keyup(function() {
			if ($('#email').val() != '') {
				localStorage.setItem('email', $('#email').val());
			}
		});
		
		$('#dayjob').keyup(function() {
			if ($('#dayjob').val() != '') {
				localStorage.setItem('dayjob', $('#dayjob').val());
			}
		});
		
		$('#startdate').change(function() {
			if ($('#startdate').val() != '') {
				localStorage.setItem('startdate', $('#startdate').val());
			}
		});
		
		$('#blogurl').keyup(function() {
			if ($('#blogurl').val() != '') {
				localStorage.setItem('blogurl', $('#blogurl').val());
			}
		});
		
		$('#vigilantename').keyup(function() {
			if ($('#vigilantename').val() != '') {
				localStorage.setItem('vigilantename', $('#vigilantename').val());
			}
		});
		
		$('#symbol').keyup(function() {
			if ($('#symbol').val() != '') {
				localStorage.setItem('symbol', $('#symbol').val());
			}
		});
		
		$('#primarycolor').change(function() {
			if ($('#primarycolor').val() != '') {
				localStorage.setItem('primarycolor', $('#primarycolor').val());
			}
		});
		
		$('#motivations').change(function() {
			if ($('#motivations').val() != '') {
				localStorage.setItem('motivations', $('#motivations').val());
			}
		});
		
		$('#weapon').change(function() {
			if ($('#weapon').val() != '') {
				localStorage.setItem('weapon', $('#weapon').val());
			}
		});
		
		$('#reason').keyup(function() {
			if ($('#reason').val() != '') {
				localStorage.setItem('reason', $('#reason').val());
			}
		});
		
		//reset button
		$('#reset').click(function(){
			localStorage.clear();
		});
		
		
		// for an example of storing information from a multiple select,
		// see line 266 from the objects demo from the slides 
		// http://iam.colum.edu/Jon.Petto/ewt/local-storage/demo/objects.php
		
		if(navigator.geolocation) {
			var geo_options = {
				enableHighAccuracy: true,
				timeout: 2000,
				maximumAge: 5000
			};	
			navigator.geolocation.getCurrentPosition(found, notFound);
		}
		
	});

	function populate_form_with_stored_info() {
		// check for stored name
		var stored_name = localStorage.getItem('name');
		if (stored_name !== '') {
			$('#name').val(stored_name);
		}

		// check for stored age...
		var stored_age = localStorage.getItem('age');
		if (stored_age !== '') {
			$('#age').val(stored_age);
		}
		
		var stored_email = localStorage.getItem('email');
		if (stored_email !== '') {
			$('#email').val(stored_email);
		}
		
		var stored_dayjob = localStorage.getItem('dayjob');
		if (stored_dayjob !== '') {
			$('#dayjob').val(stored_dayjob);
		}
		
		var stored_startdate = localStorage.getItem('startdate');
		if (stored_startdate !== '') {
			$('#startdate').val(stored_startdate);
		}
		
		var stored_blogurl = localStorage.getItem('blogurl');
		if (stored_blogurl !== '') {
			$('#blogurl').val(stored_blogurl);
		}
		
		var stored_vigilantename = localStorage.getItem('vigilantename');
		if (stored_vigilantename !== '') {
			$('#vigilantename').val(stored_vigilantename);
		}
		
		var stored_symbol = localStorage.getItem('symbol');
		if (stored_blogurl !== '') {
			$('#symbol').val(stored_symbol);
		}
		
		var stored_primarycolor = localStorage.getItem('primarycolor');
		if (stored_primarycolor !== '') {
			$('#primarycolor').val(stored_primarycolor);
		}
		
		var stored_motivations = localStorage.getItem('motivations');
		if (stored_motivations !== '') {
			$('#motivations').val(stored_motivations);
		}
		
		var stored_weapon = localStorage.getItem('weapon');
		if (stored_weapon !== '') {
			$('#weapon').val(stored_weapon);
		}
		
		var stored_reason = localStorage.getItem('reason');
		if (stored_reason !== '') {
			$('#reason').val(stored_reason);
		}
	}
	
</script>

</body>
</html>